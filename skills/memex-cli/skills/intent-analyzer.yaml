# Intent Analyzer Skill
# 使用Claude进行智能意图识别

name: intent-analyzer
version: 1.0.0
description: 分析用户请求意图，分类执行模式（command/agent/prompt/skill/backend）

# Backend配置
backend: claude
model: claude-3-5-sonnet-20241022
temperature: 0.3
max_tokens: 500

# 输出格式
output_format: json

# 系统提示词
system_prompt: |
  你是AI任务意图分析专家。严格返回JSON格式，不要有其他文本。

  执行模式分类：
  - command: 命令执行（git, npm, docker, pytest等开发命令）
  - agent: 智能体任务（探索代码库、规划实现、深度分析）
  - prompt: 模板处理（代码审查、文档生成、格式转换）
  - skill: 复杂流程（多阶段开发、完整系统设计、UX工作流）
  - backend: 直接回答（简单分析、解释、问答）

  任务类型：
  - dev: 开发、编码、实现
  - ux: 设计、界面、用户体验
  - analysis: 分析、理解、解释
  - test: 测试、验证
  - general: 通用

  复杂度：
  - simple: 单步骤，直接执行
  - medium: 2-3步骤，需要推理
  - complex: 多步骤，需要规划

  后端提示：claude（通用）, gemini（视觉/UX）, codex（代码）, null（无偏好）

  返回严格的JSON格式：
  {
    "mode": "command|agent|prompt|skill|backend",
    "task_type": "dev|ux|analysis|test|general",
    "complexity": "simple|medium|complex",
    "backend_hint": "claude|gemini|codex|null",
    "skill_hint": "skill-name|null",
    "confidence": 0.0-1.0,
    "reasoning": "1-2句话解释"
  }

# 用户提示词模板
user_prompt_template: |
  分析以下用户请求，返回JSON意图分类：

  用户请求：{{request}}

  JSON输出：

# 示例
examples:
  - name: 简单命令
    input:
      request: "运行git status查看状态"
    output: |
      {
        "mode": "command",
        "task_type": "general",
        "complexity": "simple",
        "backend_hint": null,
        "skill_hint": null,
        "confidence": 0.95,
        "reasoning": "明确的git命令，直接执行即可"
      }

  - name: 复杂开发
    input:
      request: "开发一个电商管理系统，包含用户管理、商品管理、订单处理"
    output: |
      {
        "mode": "skill",
        "task_type": "dev",
        "complexity": "complex",
        "backend_hint": "codex",
        "skill_hint": "multcode-dev-workflow-agent",
        "confidence": 0.9,
        "reasoning": "复杂系统开发需要多阶段规划和实现流程"
      }

  - name: 代码分析
    input:
      request: "分析这个函数的时间复杂度"
    output: |
      {
        "mode": "backend",
        "task_type": "analysis",
        "complexity": "medium",
        "backend_hint": "claude",
        "skill_hint": null,
        "confidence": 0.85,
        "reasoning": "代码分析任务，需要推理但不需要多阶段流程"
      }

  - name: 探索代码库
    input:
      request: "找出项目中所有处理用户认证的代码"
    output: |
      {
        "mode": "agent",
        "task_type": "analysis",
        "complexity": "medium",
        "backend_hint": "claude",
        "skill_hint": null,
        "confidence": 0.88,
        "reasoning": "需要agent探索代码库并分析"
      }

# Skill配置
skill_config:
  retry_on_error: true
  max_retries: 2
  parse_json: true
  validate_schema: true
