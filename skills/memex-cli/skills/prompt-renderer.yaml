# Prompt Renderer Skill
# æç¤ºè¯æ¨¡æ¿æ¸²æŸ“å’Œæ‰§è¡Œ

name: prompt-renderer
version: 1.0.0
description: æ¸²æŸ“æç¤ºè¯æ¨¡æ¿å¹¶æ‰§è¡Œï¼Œæ”¯æŒä»£ç å®¡æŸ¥ã€æ–‡æ¡£ç”Ÿæˆç­‰é¢„å®šä¹‰æ¨¡æ¿

# Backendé…ç½®ï¼ˆå¯è¢«è¦†ç›–ï¼‰
backend: claude
model: claude-3-5-sonnet-20241022
temperature: 0.3
max_tokens: 4000

# è¾“å‡ºæ ¼å¼
output_format: text

# ç³»ç»Ÿæç¤ºè¯
system_prompt: |
  ä½ æ˜¯æç¤ºè¯æ¨¡æ¿æ‰§è¡Œä¸“å®¶ã€‚æ ¹æ®æ¨¡æ¿ç±»å‹æ‰§è¡Œç›¸åº”çš„ä»»åŠ¡ã€‚

  æ”¯æŒçš„æ¨¡æ¿ç±»å‹ï¼š
  1. code-review - ä»£ç å®¡æŸ¥
  2. code-generation - ä»£ç ç”Ÿæˆ
  3. documentation - æ–‡æ¡£ç”Ÿæˆ
  4. bug-analysis - Bugåˆ†æ
  5. refactoring - é‡æ„å»ºè®®
  6. test-generation - æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ

  æ‰§è¡Œæµç¨‹ï¼š
  1. è¯†åˆ«æ¨¡æ¿ç±»å‹
  2. æå–å˜é‡ï¼ˆcode, language, requirementsç­‰ï¼‰
  3. åº”ç”¨æ¨¡æ¿é€»è¾‘
  4. è¿”å›ç»“æœ

  è¾“å‡ºæ ¼å¼åº”æ¸…æ™°ã€ç»“æ„åŒ–ï¼Œä¾¿äºç†è§£ã€‚

# ç”¨æˆ·æç¤ºè¯æ¨¡æ¿
user_prompt_template: |
  æ¨¡æ¿ç±»å‹ï¼š{{template_name}}

  {% if template_name == "code-review" %}
  è¯·å®¡æŸ¥ä»¥ä¸‹{{language}}ä»£ç ï¼š

  ```{{language}}
  {{code}}
  ```

  å®¡æŸ¥è¦ç‚¹ï¼š
  1. ä»£ç è´¨é‡å’Œå¯è¯»æ€§
  2. æ½œåœ¨bugå’Œè¾¹ç•Œæƒ…å†µ
  3. æ€§èƒ½ä¼˜åŒ–å»ºè®®
  4. æœ€ä½³å®è·µéµå¾ª

  {% elif template_name == "code-generation" %}
  è¯·ç”Ÿæˆ{{language}}ä»£ç å®ç°ä»¥ä¸‹éœ€æ±‚ï¼š

  éœ€æ±‚ï¼š{{requirements}}

  {% if constraints %}
  çº¦æŸæ¡ä»¶ï¼š{{constraints}}
  {% endif %}

  {% elif template_name == "documentation" %}
  è¯·ä¸ºä»¥ä¸‹{{language}}ä»£ç ç”Ÿæˆæ–‡æ¡£ï¼š

  ```{{language}}
  {{code}}
  ```

  æ–‡æ¡£åº”åŒ…æ‹¬ï¼š
  - åŠŸèƒ½è¯´æ˜
  - å‚æ•°è¯´æ˜
  - è¿”å›å€¼è¯´æ˜
  - ä½¿ç”¨ç¤ºä¾‹

  {% elif template_name == "bug-analysis" %}
  è¯·åˆ†æä»¥ä¸‹Bugï¼š

  é”™è¯¯ä¿¡æ¯ï¼š
  {{error_message}}

  ç›¸å…³ä»£ç ï¼š
  ```{{language}}
  {{code}}
  ```

  è¯·æä¾›ï¼š
  1. BugåŸå› åˆ†æ
  2. ä¿®å¤å»ºè®®
  3. é¢„é˜²æªæ–½

  {% elif template_name == "refactoring" %}
  è¯·æä¾›ä»¥ä¸‹ä»£ç çš„é‡æ„å»ºè®®ï¼š

  ```{{language}}
  {{code}}
  ```

  é‡æ„ç›®æ ‡ï¼š{{refactoring_goal}}

  {% elif template_name == "test-generation" %}
  è¯·ä¸ºä»¥ä¸‹{{language}}ä»£ç ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼š

  ```{{language}}
  {{code}}
  ```

  æµ‹è¯•åº”è¦†ç›–ï¼š
  - æ­£å¸¸æƒ…å†µ
  - è¾¹ç•Œæƒ…å†µ
  - å¼‚å¸¸æƒ…å†µ

  {% else %}
  ä»»åŠ¡ï¼š{{request}}
  {% endif %}

# ç¤ºä¾‹
examples:
  - name: ä»£ç å®¡æŸ¥
    input:
      template_name: "code-review"
      language: "python"
      code: |
        def calculate_total(items):
            total = 0
            for item in items:
                total += item['price']
            return total
    output: |
      ä»£ç å®¡æŸ¥ç»“æœï¼š

      âœ“ ä¼˜ç‚¹ï¼š
      1. é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£
      2. å‡½æ•°å‘½åå‡†ç¡®

      âš  é—®é¢˜ï¼š
      1. ç¼ºå°‘è¾“å…¥éªŒè¯ï¼ˆitemså¯èƒ½ä¸ºNoneï¼‰
      2. æ²¡æœ‰å¤„ç†priceå­—æ®µç¼ºå¤±çš„æƒ…å†µ
      3. æ²¡æœ‰ç±»å‹æ³¨è§£

      ğŸ’¡ å»ºè®®ï¼š
      ```python
      def calculate_total(items: list[dict]) -> float:
          """è®¡ç®—å•†å“æ€»ä»·"""
          if not items:
              return 0.0

          total = 0.0
          for item in items:
              price = item.get('price', 0)
              if isinstance(price, (int, float)) and price >= 0:
                  total += price
          return total
      ```

      æ”¹è¿›ç‚¹ï¼š
      - æ·»åŠ ç±»å‹æ³¨è§£
      - å¤„ç†Noneå’Œç©ºåˆ—è¡¨
      - ä½¿ç”¨get()é¿å…KeyError
      - éªŒè¯priceç±»å‹å’Œå€¼

  - name: æ–‡æ¡£ç”Ÿæˆ
    input:
      template_name: "documentation"
      language: "python"
      code: |
        def fetch_user(user_id: int) -> dict:
            return db.query("SELECT * FROM users WHERE id = ?", user_id)
    output: |
      # fetch_user

      ä»æ•°æ®åº“è·å–ç”¨æˆ·ä¿¡æ¯ã€‚

      ## å‚æ•°
      - `user_id` (int): ç”¨æˆ·ID

      ## è¿”å›å€¼
      - `dict`: ç”¨æˆ·ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«æ‰€æœ‰ç”¨æˆ·å­—æ®µ

      ## ç¤ºä¾‹
      ```python
      user = fetch_user(123)
      print(user['name'])
      ```

      ## æ³¨æ„äº‹é¡¹
      - å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¿”å›ç©ºå­—å…¸
      - éœ€è¦ç¡®ä¿æ•°æ®åº“è¿æ¥å·²å»ºç«‹

  - name: Bugåˆ†æ
    input:
      template_name: "bug-analysis"
      language: "python"
      error_message: "IndexError: list index out of range"
      code: |
        def get_first_item(items):
            return items[0]
    output: |
      Bugåˆ†æï¼š

      ## åŸå› 
      å½“ä¼ å…¥ç©ºåˆ—è¡¨æ—¶ï¼Œå°è¯•è®¿é—®items[0]å¯¼è‡´IndexErrorã€‚

      ## ä¿®å¤å»ºè®®
      ```python
      def get_first_item(items):
          if not items:
              return None  # æˆ–æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸
          return items[0]
      ```

      ## é¢„é˜²æªæ–½
      1. å§‹ç»ˆéªŒè¯åˆ—è¡¨éç©º
      2. ä½¿ç”¨items[0] if items else Noneçš„æ¨¡å¼
      3. æ·»åŠ å•å…ƒæµ‹è¯•è¦†ç›–ç©ºåˆ—è¡¨æƒ…å†µ

# Skillé…ç½®
skill_config:
  retry_on_error: true
  max_retries: 1
  timeout: 60
  parse_output: false  # ä¿ç•™åŸå§‹æ ¼å¼
